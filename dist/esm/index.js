import{jsxs as e,jsx as n}from"react/jsx-runtime";import{useState as t,useEffect as o}from"react";import r from"axios";var a=function(){return a=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},a.apply(this,arguments)};function i(e,n,t,o){return new(t||(t=Promise))((function(r,a){function i(e){try{c(o.next(e))}catch(e){a(e)}}function p(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,p)}c((o=o.apply(e,n||[])).next())}))}function p(e,n){var t,o,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:p(0),throw:p(1),return:p(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function p(p){return function(c){return function(p){if(t)throw new TypeError("Generator is already executing.");for(;a&&(a=0,p[0]&&(i=0)),i;)try{if(t=1,o&&(r=2&p[0]?o.return:p[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,p[1])).done)return r;switch(o=0,r&&(p=[2&p[0],r.value]),p[0]){case 0:case 1:r=p;break;case 4:return i.label++,{value:p[1],done:!1};case 5:i.label++,o=p[1],p=[0];continue;case 7:p=i.ops.pop(),i.trys.pop();continue;default:if(!(r=i.trys,(r=r.length>0&&r[r.length-1])||6!==p[0]&&2!==p[0])){i=0;continue}if(3===p[0]&&(!r||p[1]>r[0]&&p[1]<r[3])){i.label=p[1];break}if(6===p[0]&&i.label<r[1]){i.label=r[1],r=p;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(p);break}r[2]&&i.ops.pop(),i.trys.pop();continue}p=n.call(e,i)}catch(e){p=[6,e],o=0}finally{t=r=0}if(5&p[0])throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}([p,c])}}}"function"==typeof SuppressedError&&SuppressedError;var c=function(){var c=t([]),u=c[0],l=c[1],s=t(0),d=s[0],f=s[1],m=t(0),y=m[0],v=m[1],_=t(0),h=_[0],k=_[1],g=t(""),b=g[0],T=g[1];o((function(){i(void 0,void 0,void 0,(function(){var e;return p(this,(function(n){switch(n.label){case 0:return[4,r.post("https://beta.pokeapi.co/graphql/v1beta",{query:"\n                    query typesPokeAPIquery {\n                        pokemon_v2_type(where: {pokemon_v2_pokemontypes_aggregate: {count: {predicate: {_gt: 0}}}}) {\n                            id\n                            name\n                            pokemon_v2_typeefficacies {\n                                damage_factor\n                                pokemonV2TypeByTargetTypeId {\n                                    id\n                                    name\n                                }\n                            }\n                        }\n                    }\n                "})];case 1:return(e=n.sent().data).data&&l(e.data.pokemon_v2_type),[2]}}))}))}),[]);return e("div",{children:[e("div",{children:[e("label",{children:["Type 1:",e("select",a({value:d,onChange:function(e){return f(parseInt(e.target.value))}},{children:[n("option",a({value:0},{children:"None"})),u.map((function(e){return n("option",a({value:e.id},{children:e.name}))}))]}))]}),e("label",{children:["Type 2:",e("select",a({value:y,onChange:function(e){return v(parseInt(e.target.value))},disabled:!d},{children:[n("option",a({value:0},{children:"None"})),u.map((function(e){return n("option",a({value:e.id},{children:e.name}))}))]}))]}),e("label",{children:["Tera Type:",e("select",a({value:h,onChange:function(e){return k(parseInt(e.target.value))}},{children:[n("option",a({value:0},{children:"None"})),u.map((function(e){return n("option",a({value:e.id},{children:e.name}))}))]}))]}),n("input",{type:"button",value:"Calculate",onClick:function(){return i(void 0,void 0,void 0,(function(){var e,n,t,o,a,i,c,l,s,f;return p(this,(function(p){switch(p.label){case 0:for(e=h||d,n=u.map((function(n){var t=0;return t=-n.pokemon_v2_typeefficacies.find((function(n){return n.pokemonV2TypeByTargetTypeId.id===e})).damage_factor,t+=u.find((function(e){return e.id===d})).pokemon_v2_typeefficacies.find((function(e){return e.pokemonV2TypeByTargetTypeId.id===n.id})).damage_factor,y&&(t+=u.find((function(e){return e.id===y})).pokemon_v2_typeefficacies.find((function(e){return e.pokemonV2TypeByTargetTypeId.id===n.id})).damage_factor),e!==d&&e!==y&&(t+=u.find((function(n){return n.id===e})).pokemon_v2_typeefficacies.find((function(e){return e.pokemonV2TypeByTargetTypeId.id===n.id})).damage_factor),{id:n.id,name:n.name,points:t}})).sort((function(e,n){return e.points-n.points})),t=n[0].points,o=[],a=0;n[a].points<=t;)o.push(n[a].id),a++;return 1!==o.length?[3,2]:[4,r.post("https://beta.pokeapi.co/graphql/v1beta",{query:"\n                    query pokemonPokeAPIquery {\n                        pokemon_v2_pokemon(where: {pokemon_v2_pokemontypes: {pokemon_v2_type: {id: {_eq: ".concat(o[0],"}}}, pokemon_v2_pokemontypes_aggregate: {count: {predicate: {_eq: 1}}}}, order_by: {pokemon_v2_pokemonstats_aggregate: {sum: {base_stat: desc}}}) {\n                            name\n                        }\n                    }\n                ")})];case 1:return(f=p.sent().data).data&&T(f.data.pokemon_v2_pokemon.map((function(e){return e.name})).join(", ")),[3,6];case 2:for(i=[],c=[],l=0;l<o.length-1;l++)for(s=l+1;s<o.length;s++)i.push(l),i.push(s);p.label=3;case 3:return i.length?[4,r.post("https://beta.pokeapi.co/graphql/v1beta",{query:"\n                        query pokemonPokeAPIquery {\n                            pokemon_v2_pokemon(where: {pokemon_v2_pokemontypes: {pokemon_v2_type: {id: {_eq: ".concat(o[0],"}}}, _and: {pokemon_v2_pokemontypes: {pokemon_v2_type: {id: {_eq: ").concat(o[1],"}}}}}, order_by: {pokemon_v2_pokemonstats_aggregate: {sum: {base_stat: desc}}}) {\n                                name\n                            }\n                        }\n                    ")})]:[3,5];case 4:return(f=p.sent().data).data&&c.push(f.data.pokemon_v2_pokemon.map((function(e){return e.name})).join(", ")),i.splice(0,2),[3,3];case 5:T(c.join(", ")),p.label=6;case 6:return[2]}}))}))},disabled:!d})]}),e("p",{children:[b&&"Recommended pkmn: "," ",b]})]})};export{c as TeraRaidCalc};
//# sourceMappingURL=index.js.map
